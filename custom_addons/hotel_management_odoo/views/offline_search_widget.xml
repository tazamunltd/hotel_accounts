<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Offline Search Widget XML Template
    Modified: 2025-01-07T21:42:50+05:00
    Purpose: Enhanced UI with Bootstrap accordion for hotel booking and guest information
    Key Features:
    - Dynamic hotel booking form with accordion sections
    - Searchable group bookings, contacts, and nationalities
    - Responsive and modern design with smooth transitions
    - Supports readonly and interactive modes
-->
<templates xml:space="preserve">
    <t t-name="hotel_management_odoo.OfflineSearchWidget" owl="1">
        <div class="offline-search-widget">
            <div class="container-fluid p-0">
                <!-- Bootstrap Accordion Implementation -->
                <div class="accordion" id="bookingAccordion">
                    <!-- Hotel Booking Section -->
                    <div class="accordion-item mb-3">
                        <h2 class="accordion-header" id="headingHotelBooking">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                                    data-bs-target="#collapseHotelBooking" aria-expanded="true" 
                                    aria-controls="collapseHotelBooking">
                                HOTEL BOOKING
                            </button>
                        </h2>
                        <div id="collapseHotelBooking" class="accordion-collapse collapse show" 
                             aria-labelledby="headingHotelBooking" data-bs-parent="#bookingAccordion">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <!-- Hotel Selection -->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="hotel" class="form-label">Hotel</label>
                                            <select id="hotel" class="form-select" 
                                                    t-model="state.hotel"
                                                    t-on-change="onHotelChange">
                                                <option value="">Select Hotel</option>
                                                <t t-foreach="state.hotels" t-as="hotel" t-key="hotel.id">
                                                    <option t-att-value="hotel.id">
                                                        <t t-esc="hotel.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- Room Selection -->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="rooms" class="form-label">Number of Rooms</label>
                                            <input type="number" id="rooms" class="form-control" 
                                                   min="1" t-att-value="state.rooms"
                                                   t-on-change="(ev) => this.updateRooms(ev.target.value)"/>
                                        </div>
                                    </div>
                                    <!-- Date Selection -->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="check-in-date" class="form-label">Check-in Date</label>
                                            <input type="date" id="check-in-date" class="form-control"
                                                   t-on-change="onCheckInDateChange"
                                                   t-on-blur="onCheckInDateBlur"
                                                   t-att-min="state.systemDate"
                                                   t-att-value="state.checkInDate"/>
                                        </div>
                                    </div>
                                    
                                    <!-- Number of Nights -->
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="nights" class="form-label">Nights</label>
                                            <input type="number" id="nights" class="form-control"
                                                   t-on-change="(ev) => this.onNightsChange(ev.target.value)"
                                                   t-on-blur="(ev) => this.onNightsBlur(ev.target.value)"
                                                   t-att-value="state.noOfNights"
                                                   min="1"
                                                   max="730"/>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="check-out-date" class="form-label">Check-out Date</label>
                                            <input type="date" id="check-out-date" class="form-control"
                                                   t-on-change="onCheckOutDateChange"
                                                   t-on-blur="onCheckOutDateBlur"
                                                   t-att-min="state.checkInDate || state.systemDate"
                                                   t-att-value="state.checkOutDate"
                                                   readonly="true"/>
                                        </div>
                                    </div>
                                    
                                    <!-- Room Details -->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="room-type" class="form-label">Room Type</label>
                                            <select id="room-type" class="form-select">
                                                <option value="">Select Type</option>
                                                <t t-foreach="state.roomTypes" t-as="type" t-key="type.id">
                                                    <option t-att-value="type.id">
                                                        <t t-esc="type.room_type"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Guest Information Section -->
                    <div class="accordion-item mb-3">
                        <h2 class="accordion-header" id="headingGuestInfo">
                            <button class="accordion-button collapsed" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#collapseGuestInfo" 
                                    aria-expanded="false" aria-controls="collapseGuestInfo">
                                GUEST INFORMATION
                            </button>
                        </h2>
                        <div id="collapseGuestInfo" class="accordion-collapse collapse" 
                             aria-labelledby="headingGuestInfo" data-bs-parent="#bookingAccordion">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <!-- Guest Count -->
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="adults" class="form-label">Adults</label>
                                            <input type="number" id="adults" class="form-control" 
                                                   min="1" t-att-value="state.adults"
                                                   t-on-change="(ev) => this.updateAdults(ev.target.value)"/>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="children" class="form-label">Children</label>
                                            <input type="number" id="children" class="form-control" 
                                                   min="0" t-att-value="state.children"
                                                   t-on-change="(ev) => this.updateChildren(ev.target.value)"/>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="infants" class="form-label">Infants</label>
                                            <input type="number" id="infants" class="form-control" 
                                                   min="0" t-att-value="state.infants"
                                                   t-on-change="(ev) => this.updateInfants(ev.target.value)"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons mt-4">

                        <div class="row g-2">
                            <div class="col-md-3">
                                <button class="btn btn-primary w-100" 
                                        t-on-click="searchRooms">
                                    Search Rooms
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-secondary w-100" 
                                        t-on-click="clearAllRooms">
                                    Clear
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- Search Results Grid -->
                    <div class="search-results mt-4" t-if="state.searchResults and state.searchResults.length">
                        <h5 class="mb-3">Available Room Types</h5>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Room Type</th>
                                    <th>Company</th>
                                    <th>Actual Free to Sell</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="state.searchResults" t-as="room" t-key="room.room_type_id">
                                    <tr>
                                        <td><t t-esc="room.room_type_name"/></td>
                                        <td><t t-esc="room.company_name"/></td>
                                        <td><t t-esc="room.actualFreeToSell"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>

                    <!-- No Results Message -->
                    <div class="no-results mt-4" t-if="state.searchPerformed and (!state.searchResults or !state.searchResults.length)">
                        <div class="alert alert-warning">
                            No room types available for the selected criteria. Please adjust your search parameters.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
